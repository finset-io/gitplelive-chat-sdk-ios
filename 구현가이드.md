# GitpleLiveChat 모바일 앱 구현 가이드 (abstract v1.0)

### iOS SDK 라이브러리 배포

- https://github.com/finset-io/gitplelive-chat-sdk-ios 저장소에 퍼블릭으로 배포
- 현재는 main 저장되어 있으나 버전별 브랜치(예: 1.0.1)에 배포 가능


## 라이브러리 설치 및 사용 방법

- 스위프트 패키지에 https://github.com/finset-io/gitplelive-chat-sdk-ios 추가 후 main 또는 해당 버전 선택
- 코드에 아래 내용 추가

        import GitpleLiveChat


## 푸시토큰 등록

    class AppDelegate: UIResponder, UIApplicationDelegate, UNUserNotificationCenterDelegate, MessagingDelegate {
        
        func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey: Any]?) -> Bool {
            
            // Use Firebase library to configure APIs
            FirebaseApp.configure()
            UNUserNotificationCenter.current().delegate = self
            Messaging.messaging().delegate = self
            
            let authOptions: UNAuthorizationOptions = [.alert, .badge, .sound]
            UNUserNotificationCenter.current().requestAuthorization(options: authOptions, completionHandler: { (_, _) in })
            
            application.registerForRemoteNotifications()
            Messaging.messaging().delegate = self
            
            return true
        }
    
        func messaging(_ messaging: Messaging, didReceiveRegistrationToken fcmToken: String?) {
            guard let token = fcmToken else { return }
            
            // 푸시토큰 등록
            ChatClient.shared.setPushToken(pushToken: token)
        }

        ...
    }
    

## 초기화

    class SomeViewController: UIViewController, ConnectionDelegate {
    
        override func viewDidLoad() {
            super.viewDidLoad()
            ...
            
            // 초기화
            ChatClient.setup(host: "guest.gitplelive.io", appId: "gitple")
            ChatClient.shared.delegate = self
            ...
        }
                
        func onError(errorType: Int) {
            print("[debug]", "onError", errorType)
            ...
        }
        
        func onConnected(status: String) {
            print("[debug]", "onConnected", status)
            ...
        }
        
        func onReconnected(status: String) {
            print("[debug]", "onReconnected", status)
            ...
        }
        
        func onDisconnected(status: String) {
            print("[debug]", "onDisconnected", status)
            ...
        }
    
        ...
    }
    
